(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{129:function(e,t,n){e.exports={App:"Messenger_App__2rWxQ"}},130:function(e,t){e.exports="data:image/png;base64,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"},141:function(e,t,n){e.exports=n(210)},146:function(e,t,n){},181:function(e,t){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(7);n(146),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(32),o=n(44),i=n(92),l=n(52),u=n(127),m=n.n(u),g={socket:null,createConnection:function(){this.socket=m()("https://back-4-chat.herokuapp.com/")},subscribe:function(e,t,n){var a,c,s;null===(a=this.socket)||void 0===a||a.on("init-messages-published",e),null===(c=this.socket)||void 0===c||c.on("new-message-sent",t),null===(s=this.socket)||void 0===s||s.on("user-typing",n)},destroyConnection:function(){var e;null===(e=this.socket)||void 0===e||e.disconnect(),this.socket=null},sendName:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-name-sent",e,(function(e){console.log(e),e&&alert(e)}))},sendMessage:function(e){var t;null===(t=this.socket)||void 0===t||t.emit("client-message-sent",e,(function(e){e&&alert(e)}))},typeMessage:function(){var e;null===(e=this.socket)||void 0===e||e.emit("client-typed")}},A={messages:[],typingUsers:[]},E=function(e){return{type:"CHAT/SET_MESSAGES",messages:e}},d=function(e){return{type:"CHAT/SET_NEW_MESSAGES",message:e}},h=function(e){return{type:"CHAT/SET_USER",user:e}},f=function(e){return{type:"CHAT/REMOVED_USER",user:e}},I=0,w=function(){return function(){g.destroyConnection()}},p=n(128),v=Object(o.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHAT/SET_MESSAGES":return Object(l.a)({},e,{messages:t.messages});case"CHAT/SET_NEW_MESSAGES":return Object(l.a)({},e,{messages:[].concat(Object(i.a)(e.messages),[t.message]),typingUsers:e.typingUsers.filter((function(e){return e.id!==t.message.user.id}))});case"CHAT/SET_USER":return Object(l.a)({},e,{typingUsers:[].concat(Object(i.a)(e.typingUsers.filter((function(e){return e.id!==t.user.id}))),[t.user])});case"CHAT/REMOVED_USER":return Object(l.a)({},e,{typingUsers:e.typingUsers.filter((function(e){return e.id!==t.user.id}))});default:return e}}}),C=Object(o.d)(v,Object(o.a)(p.a));window.store=C;var y=n(38),D=n(10),B=n(129),b=n.n(B),j=n(71),Y=n.n(j),k=n(68),T=n.n(k),S=n(33),H=n(72),O=n.n(H),R=n(134),N=n.n(R),F=n(232),Q=n(234),W=n(235),X=n(130),x=n.n(X),M=function(e){var t=new Date(e.time).toLocaleString(),n=e.name;return c.a.createElement("div",null,c.a.createElement("div",{className:O.a.chatName},c.a.createElement(F.a,null,c.a.createElement(Q.a,null,c.a.createElement(N.a,{alt:"Profile Picture",src:x.a})),c.a.createElement(W.a,{className:O.a.text,primary:n,secondary:e.message}),c.a.createElement("div",{className:O.a.date},t))),c.a.createElement("hr",null))},P=n(37),J=n.n(P),K=n(135),U=n.n(K),G=function(e){return c.a.createElement("div",{className:J.a.btn},c.a.createElement(U.a,{className:J.a.buttonText,size:"medium",variant:"outlined",color:"primary",disabled:e.disabled,onClick:e.onClickHandler},e.name))},L=function(e){var t=Object(r.c)((function(e){return e.chat.messages})),n=Object(r.c)((function(e){return e.chat.typingUsers})),s=Object(r.b)(),o=Object(a.useState)(""),i=Object(y.a)(o,2),l=i[0],u=i[1],m=Object(a.useState)(!0),A=Object(y.a)(m,2),E=A[0],d=A[1],h=Object(a.useState)(0),f=Object(y.a)(h,2),I=f[0],p=f[1];Object(a.useEffect)((function(){var e;E&&(null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[t,n,E]),Object(a.useEffect)((function(){return function(){s(w())}}),[s]);var v=Object(a.useRef)(null),C=function(){s(function(e){return function(){g.sendMessage(e)}}(l)),u("")},B=t.map((function(e){return c.a.createElement(M,{key:e.id,time:e.id,name:e.user.name,message:e.message})})),b=n.map((function(e){return c.a.createElement("div",{key:e.id},c.a.createElement("b",null,e.name,":")," ...")}));return"unknown"===e.name?c.a.createElement(D.a,{to:"/login"}):c.a.createElement("div",{className:Y.a.main},c.a.createElement(S.b,{to:"/login"},c.a.createElement(G,{name:"Change name",onClickHandler:function(){s(w()),e.setTemporaryName("")}})),c.a.createElement("div",{className:Y.a.chatWindow,onScroll:function(e){var t=e.currentTarget,n=t.scrollHeight-t.clientHeight;t.scrollTop>I&&Math.abs(n-t.scrollTop)<2?d(!0):d(!1),p(t.scrollTop)}},B,b,c.a.createElement("div",{ref:v})),c.a.createElement("div",{className:Y.a.messageField},c.a.createElement(T.a,{id:"outlined-basic",label:"Enter your message...",value:l,onKeyPress:function(e){"Enter"===e.key&&C()},onChange:function(e){u(e.currentTarget.value),s((function(){g.typeMessage()}))}})),c.a.createElement(G,{name:"Send message",onClickHandler:C}))},V=function(e){var t=Object(r.b)(),n=Object(D.g)(),s=function(){var n;e.setName(e.temporaryName),t((n=e.temporaryName,function(){g.sendName(n)}))};return Object(a.useEffect)((function(){t((function(e){g.createConnection(),g.subscribe((function(t,n){e(E(t)),n("data from front")}),(function(t){e(d(t))}),(function(t){e(h(t)),clearTimeout(I),I=window.setTimeout((function(){e(f(t))}),5e3)}))}))}),[t]),c.a.createElement("div",{className:J.a.main},c.a.createElement("h1",{className:J.a.header},"Welcome to chat"),c.a.createElement("div",{className:J.a.nameField},c.a.createElement(T.a,{id:"outlined-basic",label:"Enter your name",onChange:function(t){e.setTemporaryName(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&e.temporaryName.length>0&&(s(),n.push("/chat"))}})),c.a.createElement(S.b,{to:e.temporaryName.length<1?"/login":"/chat"},c.a.createElement(G,{name:"Enter to chat",disabled:e.temporaryName.length<1,onClickHandler:s})))},Z=function(){var e=Object(a.useState)(""),t=Object(y.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)("unknown"),o=Object(y.a)(r,2),i=o[0],l=o[1];return c.a.createElement("div",{className:b.a.app},c.a.createElement(D.d,null,c.a.createElement(D.b,{exact:!0,path:"/",render:function(){return c.a.createElement(D.a,{to:"/login"})}}),c.a.createElement(D.b,{path:"/login",render:function(){return c.a.createElement(V,{setTemporaryName:s,temporaryName:n,setName:l,name:i})}}),c.a.createElement(D.b,{path:"/chat",render:function(){return c.a.createElement(L,{setTemporaryName:s,name:i})}})))};Object(s.render)(c.a.createElement(S.a,null,c.a.createElement(r.a,{store:C},c.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,n){e.exports={main:"LoginPage_main__3S-K3",nameField:"LoginPage_nameField__33iYm"}},71:function(e,t,n){e.exports={main:"Chat_main__1Fuvh",chatWindow:"Chat_chatWindow__1o-9T",messageField:"Chat_messageField__1LoVa",messageButton:"Chat_messageButton__2P5KJ",header:"Chat_header__3Y8xF"}},72:function(e,t,n){e.exports={chatName:"Message_chatName__1miE4",text:"Message_text__yB6PM",date:"Message_date__3MH6i",chatAvatar:"Message_chatAvatar__1_kI7"}}},[[141,1,2]]]);
//# sourceMappingURL=main.b9b33688.chunk.js.map